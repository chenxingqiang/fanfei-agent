app:
  description: å®ç°äº§å“æˆæœ¬è®¡ç®—ã€ç‰©æµè´¹ç”¨è®¡ç®—ã€åˆ©æ¶¦åˆ†æå’Œæœ€ç»ˆæŠ¥ä»·ç”Ÿæˆ
  icon: ğŸ’°
  icon_background: '#FFF2E6'
  mode: workflow
  name: ä»·æ ¼è®¡ç®—æ¨¡å—

kind: app
version: 0.1.1

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: llm
      id: start-to-cost-calculation
      source: '1735721534567'
      sourceHandle: source
      target: '1735721534568'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: knowledge-retrieval
      id: cost-to-logistics
      source: '1735721534568'
      sourceHandle: source
      target: '1735721534569'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: knowledge-retrieval
        targetType: llm
      id: logistics-to-profit
      source: '1735721534569'
      sourceHandle: source
      target: '1735721534570'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: llm
      id: profit-to-quote
      source: '1735721534570'
      sourceHandle: source
      target: '1735721534571'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: http-request
      id: quote-to-output
      source: '1735721534571'
      sourceHandle: source
      target: '1735721534572'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: end
      id: output-to-end
      source: '1735721534572'
      sourceHandle: source
      target: '1735721534573'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: ä¾›åº”å•†æŠ¥ä»·
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: supplier_quote
        - label: äº§å“è§„æ ¼
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: product_specs
        - label: å®¢æˆ·éœ€æ±‚æ•°é‡
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: quantity
        - label: ç›®æ ‡å›½å®¶
          max_length: 48
          options: []
          required: true
          type: text-input
          variable: destination_country
        - label: äº¤è´§æœŸè¦æ±‚
          max_length: 48
          options: []
          required: false
          type: text-input
          variable: delivery_time
      height: 116
      id: '1735721534567'
      position:
        x: 30
        y: 282
      positionAbsolute:
        x: 30
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: è®¡ç®—äº§å“æˆæœ¬ï¼ŒåŒ…æ‹¬é‡‡è´­æˆæœ¬ã€åŒ…è£…æˆæœ¬ã€å¤„ç†è´¹ç”¨ç­‰
        memory:
          query_prompt_template: ''
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4
          provider: openai
        prompt_template:
        - id: system
          role: system
          text: |
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„äº§å“æˆæœ¬è®¡ç®—ä¸“å®¶ã€‚æ ¹æ®ä¾›åº”å•†æŠ¥ä»·å’Œäº§å“è§„æ ¼ï¼Œè®¡ç®—æ€»çš„äº§å“æˆæœ¬ã€‚

            éœ€è¦è€ƒè™‘çš„æˆæœ¬é¡¹ï¼š
            1. é‡‡è´­æˆæœ¬ï¼šä¾›åº”å•†æŠ¥ä»· Ã— æ•°é‡
            2. åŒ…è£…æˆæœ¬ï¼šæ ¹æ®äº§å“è§„æ ¼ä¼°ç®—åŒ…è£…ææ–™å’Œäººå·¥æˆæœ¬
            3. è´¨æ£€æˆæœ¬ï¼šçº¦ä¸ºé‡‡è´­æˆæœ¬çš„2-3%
            4. æ“ä½œè´¹ç”¨ï¼šçº¦ä¸ºé‡‡è´­æˆæœ¬çš„5%
            5. èµ„é‡‘æˆæœ¬ï¼šçº¦ä¸ºé‡‡è´­æˆæœ¬çš„1-2%

            è¯·è¯¦ç»†è®¡ç®—æ¯é¡¹æˆæœ¬ï¼Œå¹¶æä¾›æ€»æˆæœ¬ã€‚
        - id: user
          role: user
          text: |
            ä¾›åº”å•†æŠ¥ä»·ï¼š{{#1735721534567.supplier_quote#}}
            äº§å“è§„æ ¼ï¼š{{#1735721534567.product_specs#}}
            éœ€æ±‚æ•°é‡ï¼š{{#1735721534567.quantity#}}

            è¯·è®¡ç®—è¯¦ç»†çš„äº§å“æˆæœ¬ã€‚
        selected: false
        title: äº§å“æˆæœ¬è®¡ç®—
        type: llm
        variables: []
        vision:
          enabled: false
      height: 98
      id: '1735721534568'
      position:
        x: 334
        y: 282
      positionAbsolute:
        x: 334
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        dataset:
          dataset_ids: []
          retrieval_mode: single
          reranking_enable: false
          reranking_mode: 
          reranking_model:
            completion_params: {}
            mode: 
            name: ''
            provider: ''
          score_threshold: 0.5
          score_threshold_enabled: false
          top_k: 3
        desc: æŸ¥è¯¢ç‰©æµè´¹ç”¨æ•°æ®åº“ï¼Œè·å–ç›®æ ‡å›½å®¶çš„è¿è´¹ä¿¡æ¯
        query_variable_selector:
        - '1735721534567'
        - destination_country
        retrieval_mode: single
        selected: false
        title: ç‰©æµè´¹ç”¨æŸ¥è¯¢
        type: knowledge-retrieval
      height: 54
      id: '1735721534569'
      position:
        x: 638
        y: 282
      positionAbsolute:
        x: 638
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: æ ¹æ®ç‰©æµè´¹ç”¨å’Œäº§å“æˆæœ¬ï¼Œè®¡ç®—åˆ©æ¶¦å’Œæœ€ç»ˆå”®ä»·
        memory:
          query_prompt_template: ''
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4
          provider: openai
        prompt_template:
        - id: system
          role: system
          text: |
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„åˆ©æ¶¦åˆ†æå¸ˆã€‚æ ¹æ®äº§å“æˆæœ¬å’Œç‰©æµè´¹ç”¨ï¼Œè®¡ç®—åˆç†çš„åˆ©æ¶¦ç‡å’Œæœ€ç»ˆå”®ä»·ã€‚

            åˆ©æ¶¦è®¡ç®—åŸåˆ™ï¼š
            1. æ ‡å‡†åˆ©æ¶¦ç‡ï¼š15-30%ï¼ˆæ ¹æ®äº§å“ç±»å‹è°ƒæ•´ï¼‰
            2. é£é™©ä¿è¯é‡‘ï¼š5-10%
            3. æ±‡ç‡æ³¢åŠ¨é¢„ç•™ï¼š2-5%
            4. æœ€ä½æ¯›åˆ©æ¶¦ç‡ï¼šä¸ä½äº20%

            éœ€è¦è¾“å‡ºï¼š
            1. æ€»æˆæœ¬ï¼ˆäº§å“æˆæœ¬+ç‰©æµæˆæœ¬ï¼‰
            2. å»ºè®®åˆ©æ¶¦ç‡
            3. åˆ©æ¶¦é‡‘é¢
            4. æœ€ç»ˆæŠ¥ä»·
            5. å•ä»·
        - id: user
          role: user
          text: |
            äº§å“æˆæœ¬ï¼š{{#1735721534568.text#}}
            ç‰©æµè´¹ç”¨ï¼š{{#1735721534569.result#}}
            éœ€æ±‚æ•°é‡ï¼š{{#1735721534567.quantity#}}
            ç›®æ ‡å›½å®¶ï¼š{{#1735721534567.destination_country#}}

            è¯·è®¡ç®—åˆ©æ¶¦å’Œæœ€ç»ˆæŠ¥ä»·ã€‚
        selected: false
        title: åˆ©æ¶¦è®¡ç®—
        type: llm
        variables: []
        vision:
          enabled: false
      height: 98
      id: '1735721534570'
      position:
        x: 942
        y: 282
      positionAbsolute:
        x: 942
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ç”Ÿæˆä¸“ä¸šçš„å®¢æˆ·æŠ¥ä»·å•
        memory:
          query_prompt_template: ''
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: false
            size: 50
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4
          provider: openai
        prompt_template:
        - id: system
          role: system
          text: |
            ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ¥ä»·å•ç”Ÿæˆä¸“å®¶ã€‚æ ¹æ®æˆæœ¬åˆ†æå’Œåˆ©æ¶¦è®¡ç®—ï¼Œç”Ÿæˆè§„èŒƒçš„å®¢æˆ·æŠ¥ä»·å•ã€‚

            æŠ¥ä»·å•æ ¼å¼ï¼š
            1. äº§å“ä¿¡æ¯ï¼ˆåç§°ã€è§„æ ¼ã€æ•°é‡ï¼‰
            2. å•ä»·å’Œæ€»ä»·
            3. äº¤è´§æœŸ
            4. ä»˜æ¬¾æ¡ä»¶
            5. æœ‰æ•ˆæœŸ
            6. åŒ…è£…è¯´æ˜
            7. è¿è¾“æ–¹å¼
            8. è”ç³»æ–¹å¼

            æ³¨æ„äº‹é¡¹ï¼š
            - ä»·æ ¼è¦æ¸…æ™°æ˜ç¡®
            - æ¡æ¬¾è¦ä¸“ä¸šè§„èŒƒ
            - åŒ…å«å¿…è¦çš„å…è´£å£°æ˜
        - id: user
          role: user
          text: |
            äº§å“è§„æ ¼ï¼š{{#1735721534567.product_specs#}}
            éœ€æ±‚æ•°é‡ï¼š{{#1735721534567.quantity#}}
            åˆ©æ¶¦åˆ†æï¼š{{#1735721534570.text#}}
            äº¤è´§æœŸè¦æ±‚ï¼š{{#1735721534567.delivery_time#}}
            ç›®æ ‡å›½å®¶ï¼š{{#1735721534567.destination_country#}}

            è¯·ç”Ÿæˆæ­£å¼çš„å®¢æˆ·æŠ¥ä»·å•ã€‚
        selected: false
        title: æŠ¥ä»·å•ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          enabled: false
      height: 98
      id: '1735721534571'
      position:
        x: 1246
        y: 282
      positionAbsolute:
        x: 1246
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: |
            {
              "quote_id": "{{#1735721534567.quantity#}}_{{#sys.timestamp#}}",
              "product_specs": "{{#1735721534567.product_specs#}}",
              "quantity": "{{#1735721534567.quantity#}}",
              "destination": "{{#1735721534567.destination_country#}}",
              "quote_content": "{{#1735721534571.text#}}",
              "generated_at": "{{#sys.timestamp#}}"
            }
          type: json
        desc: ä¿å­˜æŠ¥ä»·å•åˆ°ç³»ç»Ÿ
        headers: ''
        method: post
        params: ''
        selected: false
        timeout:
          connect: 30
          read: 60
          write: 60
        title: ä¿å­˜æŠ¥ä»·å•
        type: http-request
        url: http://localhost:5001/api/quotes/save
        variables: []
      height: 54
      id: '1735721534572'
      position:
        x: 1550
        y: 282
      positionAbsolute:
        x: 1550
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1735721534571'
          - text
          variable: final_quote
        - value_selector:
          - '1735721534570'
          - text
          variable: cost_analysis
        - value_selector:
          - '1735721534572'
          - body
          variable: save_result
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1735721534573'
      position:
        x: 1854
        y: 282
      positionAbsolute:
        x: 1854
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244 