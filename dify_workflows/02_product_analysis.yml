app:
  description: è‡ªåŠ¨è·å–äº§å“è¯¦æƒ…å¹¶é€šè¿‡å›¾åƒè¯†åˆ«åœ¨1688å¹³å°è¿›è¡Œä¾›åº”å•†æœç´¢
  icon: ğŸ”
  icon_background: '#E6F3FF'
  mode: workflow
  name: äº§å“ä¿¡æ¯å¤„ç†æ¨¡å—

kind: app
version: 0.1.1

workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      image:
        enabled: true
        number_limits: 5
        transfer_methods:
        - local_file
        - remote_url
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: http-request
      id: 1735721334567-source-1735721334568-target
      source: '1735721334567'
      sourceHandle: source
      target: '1735721334568'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: start
        targetType: llm
      id: 1735721334567-source-1735721334570-target
      source: '1735721334567'
      sourceHandle: source
      target: '1735721334570'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: llm
      id: 1735721334568-source-1735721334569-target
      source: '1735721334568'
      sourceHandle: source
      target: '1735721334569'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: llm
      id: 1735721334569-source-1735721334571-target
      source: '1735721334569'
      sourceHandle: source
      target: '1735721334571'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: llm
      id: 1735721334570-source-1735721334571-target
      source: '1735721334570'
      sourceHandle: source
      target: '1735721334571'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: http-request
      id: 1735721334571-source-1735721334572-target
      source: '1735721334571'
      sourceHandle: source
      target: '1735721334572'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: llm
      id: 1735721334572-source-1735721334573-target
      source: '1735721334572'
      sourceHandle: source
      target: '1735721334573'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: end
      id: 1735721334573-source-1735721334574-target
      source: '1735721334573'
      sourceHandle: source
      target: '1735721334574'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: è¾“å…¥äº§å“è¯¦æƒ…é¡µä¿¡æ¯
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - label: äº§å“è¯¦æƒ…é¡µURL
          max_length: 500
          required: true
          type: text-input
          variable: product_detail_url
        - label: äº§å“ä¸»å›¾
          required: true
          type: file
          variable: product_image
        - label: è¡¥å……æœç´¢å…³é”®è¯
          max_length: 200
          required: false
          type: text-input
          variable: search_keywords
      height: 116
      id: '1735721334567'
      position:
        x: 80
        y: 50
      positionAbsolute:
        x: 80
        y: 50
      selected: false
      type: custom
      width: 244
    - data:
        authorization:
          config: {}
          type: no-auth
        body:
          data: ''
          type: none
        desc: è·å–äº§å“è¯¦æƒ…é¡µçš„å®Œæ•´ä¿¡æ¯
        headers: 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
        method: get
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 30
          max_read_timeout: 30
          max_write_timeout: 30
        title: äº§å“è¯¦æƒ…æå–
        type: http-request
        url: '{{#1735721334567.product_detail_url#}}'
        variables: []
      height: 54
      id: '1735721334568'
      position:
        x: 384
        y: 50
      positionAbsolute:
        x: 384
        y: 50
      selected: false
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ä½¿ç”¨AIè§£æäº§å“è¯¦æƒ…é¡µï¼Œæå–è§„æ ¼ä¿¡æ¯
        model:
          completion_params:
            temperature: 0.1
          mode: chat
          name: gpt-4-vision-preview
          provider: openai
        prompt_template:
        - role: system
          text: |-
            ä½ æ˜¯ä¸“ä¸šçš„äº§å“è§„æ ¼åˆ†æå¸ˆã€‚è¯·ä»”ç»†åˆ†æäº§å“è¯¦æƒ…é¡µå†…å®¹ï¼Œæå–ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š

            å¿…é¡»æå–çš„ä¿¡æ¯ï¼š
            1. äº§å“åç§°å’Œå‹å·
            2. æè´¨/ææ–™
            3. å°ºå¯¸è§„æ ¼ï¼ˆé•¿/å®½/é«˜/é‡é‡ï¼‰
            4. é¢œè‰²/æ¬¾å¼é€‰é¡¹
            5. æ€§èƒ½æŒ‡æ ‡å’ŒæŠ€æœ¯å‚æ•°
            6. åŒ…è£…è§„æ ¼
            7. é€‚ç”¨åœºæ™¯/ç”¨é€”
            8. å“ç‰Œä¿¡æ¯
            9. äº§å“ç±»åˆ«
            10. è´¨é‡æ ‡å‡†/è®¤è¯

            è¯·ä»¥ç»“æ„åŒ–JSONæ ¼å¼è¿”å›ï¼Œå¦‚æœæŸé¡¹ä¿¡æ¯ç¼ºå¤±ï¼Œè¯·æ ‡æ³¨ä¸º'æœªçŸ¥'ã€‚
        - role: user
          text: |-
            äº§å“è¯¦æƒ…é¡µå†…å®¹ï¼š{{#1735721334568.body#}}

            è¯·åˆ†æå¹¶æå–äº§å“è§„æ ¼ä¿¡æ¯ã€‚
        selected: false
        title: äº§å“è§„æ ¼è§£æ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 54
      id: '1735721334569'
      position:
        x: 688
        y: 50
      positionAbsolute:
        x: 688
        y: 50
      selected: false
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: åˆ†æäº§å“ä¸»å›¾ï¼Œæå–è§†è§‰ç‰¹å¾
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4-vision-preview
          provider: openai
        prompt_template:
        - role: system
          text: |-
            ä½ æ˜¯ä¸“ä¸šçš„äº§å“å›¾åƒåˆ†æå¸ˆã€‚è¯·åˆ†æäº§å“å›¾åƒï¼Œæå–ä»¥ä¸‹ä¿¡æ¯ï¼š

            1. äº§å“å¤–è§‚æè¿°
            2. ä¸»è¦é¢œè‰²
            3. å½¢çŠ¶ç‰¹å¾
            4. æè´¨è´¨æ„Ÿ
            5. ä½¿ç”¨åœºæ™¯
            6. å…³é”®è§†è§‰å…ƒç´ 
            7. å“ç‰Œæ ‡è¯†
            8. åŒ…è£…æ–¹å¼

            è¯·ç”Ÿæˆé€‚åˆåœ¨1688å¹³å°æœç´¢çš„å…³é”®è¯ç»„åˆï¼ŒåŒ…æ‹¬ï¼š
            - äº§å“ç±»åˆ«å…³é”®è¯
            - æè´¨å…³é”®è¯
            - å¤–è§‚ç‰¹å¾å…³é”®è¯
            - åŠŸèƒ½ç”¨é€”å…³é”®è¯

            ä»¥JSONæ ¼å¼è¿”å›åˆ†æç»“æœã€‚
        - role: user
          text: |-
            è¯·åˆ†æè¿™ä¸ªäº§å“å›¾åƒï¼Œè¡¥å……å…³é”®è¯ï¼š{{#1735721334567.search_keywords#}}

            [å›¾åƒ: {{#1735721334567.product_image#}}]
        selected: false
        title: å›¾åƒåˆ†æ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: true
      height: 54
      id: '1735721334570'
      position:
        x: 384
        y: 250
      positionAbsolute:
        x: 384
        y: 250
      selected: false
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ç»“åˆäº§å“è§„æ ¼å’Œå›¾åƒåˆ†æï¼Œç”Ÿæˆ1688æœç´¢ç­–ç•¥
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: gpt-4
          provider: openai
        prompt_template:
        - role: system
          text: |-
            ä½ æ˜¯1688å¹³å°æœç´¢ä¸“å®¶ã€‚åŸºäºäº§å“è§„æ ¼åˆ†æå’Œå›¾åƒåˆ†æç»“æœï¼Œç”Ÿæˆæœ€ä¼˜çš„æœç´¢ç­–ç•¥ï¼š

            ç”Ÿæˆå†…å®¹åŒ…æ‹¬ï¼š
            1. ä¸»è¦æœç´¢å…³é”®è¯ï¼ˆ3-5ä¸ªï¼‰
            2. å¤‡é€‰æœç´¢å…³é”®è¯ï¼ˆ5-8ä¸ªï¼‰
            3. äº§å“ç±»ç›®ç­›é€‰å»ºè®®
            4. ä»·æ ¼èŒƒå›´é¢„ä¼°
            5. ä¾›åº”å•†ç±»å‹åå¥½ï¼ˆå·¥å‚/è´¸æ˜“å•†ï¼‰
            6. åœ°åŒºåå¥½

            æœç´¢ç­–ç•¥è¦è€ƒè™‘ï¼š
            - å…³é”®è¯çš„æœç´¢é‡å’Œç«äº‰åº¦
            - äº§å“çš„ä¸“ä¸šæ€§å’Œé€šç”¨æ€§
            - ä»·æ ¼æ•æ„Ÿåº¦
            - è´¨é‡è¦æ±‚

            ä»¥JSONæ ¼å¼è¿”å›ç­–ç•¥å»ºè®®ã€‚
        - role: user
          text: |-
            äº§å“è§„æ ¼ä¿¡æ¯ï¼š{{#1735721334569.text#}}

            å›¾åƒåˆ†æç»“æœï¼š{{#1735721334570.text#}}

            è¯·ç”Ÿæˆ1688æœç´¢ç­–ç•¥ã€‚
        selected: false
        title: æœç´¢ç­–ç•¥ç”Ÿæˆ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 54
      id: '1735721334571'
      position:
        x: 992
        y: 150
      positionAbsolute:
        x: 992
        y: 150
      selected: false
      type: custom
      width: 244
    - data:
        authorization:
          config:
            api_key: '{{#sys.api_key#}}'
          type: api-key
        body:
          data: |-
            {
              "search_type": "hybrid",
              "image_search": {
                "image_url": "{{#1735721334567.product_image#}}",
                "similarity_threshold": 0.7
              },
              "keyword_search": {
                "keywords": "{{#1735721334571.text#}}",
                "category_filter": true,
                "price_range": "auto"
              },
              "result_limit": 50,
              "sort_by": ["relevance", "sales", "price"]
            }
          type: json
        desc: åœ¨1688å¹³å°æ‰§è¡Œå›¾æœå’Œå…³é”®è¯æœç´¢
        headers: 'Content-Type: application/json'
        method: post
        params: ''
        selected: false
        timeout:
          max_connect_timeout: 60
          max_read_timeout: 60
          max_write_timeout: 60
        title: ä¾›åº”å•†æœç´¢
        type: http-request
        url: '{{#sys.search_api#}}/1688/search'
        variables: []
      height: 54
      id: '1735721334572'
      position:
        x: 1296
        y: 150
      positionAbsolute:
        x: 1296
        y: 150
      selected: false
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: åˆ†ææœç´¢ç»“æœè´¨é‡å’Œç›¸å…³æ€§
        model:
          completion_params:
            temperature: 0.2
          mode: chat
          name: gpt-4
          provider: openai
        prompt_template:
        - role: system
          text: |-
            ä½ æ˜¯ä¾›åº”å•†æœç´¢ç»“æœåˆ†æä¸“å®¶ã€‚è¯·è¯„ä¼°æœç´¢ç»“æœçš„è´¨é‡å’Œç›¸å…³æ€§ï¼š

            åˆ†æç»´åº¦ï¼š
            1. äº§å“åŒ¹é…åº¦ï¼ˆå¤–è§‚ã€è§„æ ¼ã€åŠŸèƒ½ï¼‰
            2. ä¾›åº”å•†è´¨é‡ï¼ˆè®¤è¯ã€è¯„åˆ†ã€å†å²ï¼‰
            3. ä»·æ ¼åˆç†æ€§
            4. åº“å­˜å……è¶³æ€§
            5. å“åº”é€Ÿåº¦
            6. åœ°ç†ä½ç½®ä¼˜åŠ¿

            è¾“å‡ºå»ºè®®ï¼š
            1. æ¨èçš„å‰10ä¸ªä¾›åº”å•†
            2. å„ä¾›åº”å•†çš„ä¼˜åŠ¿è¯´æ˜
            3. é£é™©æç¤º
            4. è¯¢ä»·ä¼˜å…ˆçº§

            ä»¥ç»“æ„åŒ–JSONæ ¼å¼è¿”å›åˆ†æç»“æœã€‚
        - role: user
          text: |-
            åŸå§‹äº§å“ä¿¡æ¯ï¼š{{#1735721334569.text#}}

            æœç´¢ç»“æœï¼š{{#1735721334572.body#}}

            è¯·åˆ†æå¹¶æ¨èä¼˜è´¨ä¾›åº”å•†ã€‚
        selected: false
        title: æœç´¢ç»“æœåˆ†æ
        type: llm
        variables: []
        vision:
          configs:
            detail: high
          enabled: false
      height: 54
      id: '1735721334573'
      position:
        x: 1600
        y: 150
      positionAbsolute:
        x: 1600
        y: 150
      selected: false
      type: custom
      width: 244
    - data:
        desc: è¾“å‡ºåˆ†æç»“æœ
        outputs:
        - value_selector:
          - '1735721334569'
          - text
          variable: product_specs
        - value_selector:
          - '1735721334570'
          - text
          variable: image_features
        - value_selector:
          - '1735721334571'
          - text
          variable: search_strategy
        - value_selector:
          - '1735721334573'
          - text
          variable: recommended_suppliers
        selected: false
        title: ç»“æŸ
        type: end
      height: 90
      id: '1735721334574'
      position:
        x: 1904
        y: 150
      positionAbsolute:
        x: 1904
        y: 150
      selected: false
      type: custom
      width: 244
  notes: '' 